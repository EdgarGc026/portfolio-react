import React, { useState, useEffect } from "react"
import { Meta, Story, Canvas, ArgsTable } from "@storybook/addon-docs"
import { Hero, Card, About, Portfolio, SocialMediaButtonGroup } from "../index.js"

<Meta
  title="Pages/SxPageHome"
  argTypes={{
    name: { table: { disable: true } },
    profession: { table: { disable:true } },
    buttonText: { table: { disable:true } },
    buttonProps: { table: { disable: true } },
    skillArray: { table: { disable: true } },
    description: { table: { disable: true } },
    portfolioArray: { table: {disable: true } },
  }}
/>

<ArgsTable of={PageHome} />

<Canvas>
  <Story name="PageHome">
    {(args) => {
      const [pageHomeData, setPageHomeData] = useState(null)
      useEffect(() => {
        fetch(`/pageHome`)
        .then(response => response.json())
        .then((data) => setPageHomeData(data))
      }, [])
      if(!pageHomeData) {
        return <></>
      }
      return (
        <div>
          <Hero
            name={pageHomeData.heroComponent.name}
            profession={pageHomeData.heroComponent.profession}
            buttonText={pageHomeData.heroComponent.button.buttonText}
            buttonProps={pageHomeData.heroComponent.button}
          />
          <div>
            <h2 className="mb-5 text-[2.5rem] text-center font-semibold">Skill</h2>
            <section className="grid-layout grid-layout-mobile">
              <Card skillArray={pageHomeData.skills} />
            </section>
          </div>
          <About description={pageHomeData.aboutMe[0].description} />
          <section className="p-[15px] sm:p-[60px] grid-layout">
            <div className="col-span-full row-span-full mb-5">
              <h2 className="mb-5 text-[2.5rem] text-center font-semibold">Portfolio</h2>
                <Portfolio portfolioArray={pageHomeData.portfolioProjects} />
            </div>
          </section>
          <SocialMediaButtonGroup socialMediaIcons={pageHomeData.socialMediaButtonGroup} />
        </div>
      )
    }}
  </Story>
</Canvas>